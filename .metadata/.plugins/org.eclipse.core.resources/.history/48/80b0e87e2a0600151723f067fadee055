import de.tudarmstadt.informatik.tk.assistanceplatform.moduleregistry.*;
import de.tudarmstadt.informatik.tk.assistanceplatform.moduleregistry.exceptions.ModuleRegistrationException;
import static org.junit.Assert.*;

import org.junit.Test;


public class ModuleRegistryTest {

	private final ModuleRegistry registry = new ModuleRegistry();
	
	@Test
	public void simpleRegistrationTests() {
	    assertEquals(registry.getRegisterdModules().size(), 0);
	    
	    ModuleRegistration registration1 = new ModuleRegistration("de.studentassist.xy",  "http://serveraddrs", null, null);
	    registry.registerModule(registration1);
	    assertEquals(1, registry.getRegisterdModules().size());
	    
	    ModuleRegistration registration2 = new ModuleRegistration("de.hotzones.xy",  "http://serveraddrs", null, null);
	    registry.registerModule(registration2);
	    assertEquals(2, registry.getRegisterdModules().size());
	}

	@Test
	public void testFaultyRegistrationTest() {
			    boolean exceptionThrown = false;
			    
			    try {
				    ModuleRegistration registration1 = new ModuleRegistration("de.studentassist.xy",  "http://serveraddrs", null, null);
				    registry.registerModule(registration1);
				    registry.registerModule(registration1);
			    } catch(Exception e) {
			    	if(e instanceof ModuleRegistrationException) {
			    		exceptionThrown = true;
			    	}
			      case e : ModuleRegistrationException => exceptionThrown = true
			    } finally {
			      assertEquals(true, exceptionThrown)
			    }
			    
			    assertEquals(1, registry.currentRegistrations.length)
	}
}
