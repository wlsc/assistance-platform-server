<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Wladimir Schmidt (https://github.com/wlsc)">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Deploying with docker - Assistance Platform</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Assistance Platform</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../../license/">License</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Api <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../api/client-actions-and-commands/">Client actions and commands</a>
</li>

                    
                        
<li >
    <a href="../../api/client-feedback-channel-format/">Client feedback channel format</a>
</li>

                    
                        
<li >
    <a href="../../api/rest-api-for-clients/">Rest api for clients</a>
</li>

                    
                        
<li >
    <a href="../../api/sensor-types-and-api-mapping/">Sensor types and api mapping</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Deploy <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../deploying-with-ansible/">Deploying with ansible</a>
</li>

                    
                        
<li class="active">
    <a href="./">Deploying with docker</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../developer/module-developers.-1.-getting-started-for-module-developers-%28wip%29/">Module developers. 1. getting started for module developers (wip)</a>
</li>

                    
                        
<li >
    <a href="../../developer/module-developers.-2.-advanced.-providing-custom-rest-extension/">Module developers. 2. advanced. providing custom rest extension</a>
</li>

                    
                        
<li >
    <a href="../../developer/module-developers.-3.-dockerize-your-module/">Module developers. 3. dockerize your module</a>
</li>

                    
                        
<li >
    <a href="../../developer/preprocess-events-before-save-and-distribution/">Preprocess events before save and distribution</a>
</li>

                    
                        
<li >
    <a href="../../developer/rest-api-for-modules-%28internal%29/">Rest api for modules (internal)</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../deploying-with-ansible/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../developer/module-developers.-1.-getting-started-for-module-developers-%28wip%29/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/Telecooperation/assistance-platform-server">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#motivation">Motivation</a></li>
        
    
        <li class="main "><a href="#prerequisites">Prerequisites</a></li>
        
    
        <li class="main "><a href="#deploying-stopping-and-removing">Deploying, stopping and removing</a></li>
        
            <li><a href="#deploying-an-isolated-assistance-platform">Deploying an isolated "Assistance Platform"</a></li>
        
            <li><a href="#stop-the-instance">Stop the instance</a></li>
        
            <li><a href="#remove-the-instance">Remove the instance</a></li>
        
    
        <li class="main "><a href="#testing-against-your-isolated-instance">Testing against your isolated instance</a></li>
        
    
        <li class="main "><a href="#limitations-for-module-developers">Limitations for module developers</a></li>
        
    
        <li class="main "><a href="#deploying-in-quasi-production-mode-for-standalone-servers">Deploying in (quasi) production mode for standalone servers</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h1>
<p>In some cases one might to have an isolated &ldquo;Assistance Platform&rdquo; instance for your own. Theses could be for example:
<em> Testing own modules
</em> Testing custom clients
* Run integration tests</p>
<p>This document will provide you with the needed information on how to set up such an isolated instance.</p>
<h1 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h1>
<p>We tried making these steps as easy as possible by using <a href="http://docker.com/">Docker</a>. In order to understand Docker and the available possibilities, you should also check out the <a href="http://docs.docker.com/v1.8/userguide/">Docker User Guide</a>. This page also contains instructions how to install Docker on your machine.</p>
<p>CURRENTLY you need to send a mail with your Docker Hub username to bennet.jeutter@gmail.com. This&rsquo;ll change in the future (own dedicated repository). [TODO]</p>
<h1 id="deploying-stopping-and-removing">Deploying, stopping and removing<a class="headerlink" href="#deploying-stopping-and-removing" title="Permanent link">&para;</a></h1>
<h2 id="deploying-an-isolated-assistance-platform">Deploying an isolated &ldquo;Assistance Platform&rdquo;<a class="headerlink" href="#deploying-an-isolated-assistance-platform" title="Permanent link">&para;</a></h2>
<ol>
<li>Checkout the <a href="https://github.com/Telecooperation/assistance-platform-server/tree/master/deployment/docker">Assistance Platform Docker Environment Description</a></li>
<li><code>cd</code> into your <code>docker</code> folder</li>
<li>run <code>docker-compose up</code></li>
</ol>
<p>Finish! You now have your own &ldquo;Assistance Platform&rdquo; instance running. </p>
<h2 id="stop-the-instance">Stop the instance<a class="headerlink" href="#stop-the-instance" title="Permanent link">&para;</a></h2>
<p>In order to stop the &ldquo;Assistance Platform&rdquo; just use <code>docker-compose stop</code>. This will shut down the Docker containers and &ldquo;freeze&rdquo; them. The next time you&rsquo;ll fire <code>docker-compose up</code> they will be un-freezed and started again.</p>
<h2 id="remove-the-instance">Remove the instance<a class="headerlink" href="#remove-the-instance" title="Permanent link">&para;</a></h2>
<p>Sometimes you might want to start a completely fresh instance (purge the old data etc.). Therefore you should stop the instance (<code>docker-compose stop</code>) and then run <code>docker-compose rm</code>. NOTE that this will be permanent and all persisted data  until then will be lost!</p>
<h1 id="testing-against-your-isolated-instance">Testing against your isolated instance<a class="headerlink" href="#testing-against-your-isolated-instance" title="Permanent link">&para;</a></h1>
<p>On some machines (OSX and windows) Docker will spawn a VM for you. You will probably need the IP of this machine. Therefore type: <code>docker-machine ls</code> which will give you the IP(s) of your VM(s). Use the right own (usually default).</p>
<p>On Linux &ldquo;localhost&rdquo; should be fine.</p>
<h1 id="limitations-for-module-developers">Limitations for module developers<a class="headerlink" href="#limitations-for-module-developers" title="Permanent link">&para;</a></h1>
<p>Currently the Apache Spark Module is NOT working properly if trying connecting your module form outside the Docker machine, since the Spark Master can only be accessed from the inside. In order to test your Apache Spark implementations, you can activate the so called <a href="../../developer/Module-Developers.-1.-Getting-started-for-Module-Developers-(WIP)#fire-this-thing-up">&ldquo;local mode&rdquo;</a>.</p>
<h1 id="deploying-in-quasi-production-mode-for-standalone-servers">Deploying in (quasi) production mode for standalone servers<a class="headerlink" href="#deploying-in-quasi-production-mode-for-standalone-servers" title="Permanent link">&para;</a></h1>
<p>In order to keep data safe and allow automatic restarts after reboot the production config should be used. Therefore use:
<code>sudo docker-compose -f docker-compose.yml -f docker-compose.prod.yml up</code></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
                <center><a href="https://telecooperation.github.io/" alt="Telecooperation Lab">Telecooperation Lab @ TU Darmstadt</a></center>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>